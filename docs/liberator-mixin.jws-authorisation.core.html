<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>liberator-mixin.jws-authorisation.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Liberator-mixin</span> <span class="project-version">0.0.40</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>liberator-mixin</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></div></li><li class="depth-3"><a href="liberator-mixin.context.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="liberator-mixin.core.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hal</span></div></div></li><li class="depth-3"><a href="liberator-mixin.hal.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>hypermedia</span></div></div></li><li class="depth-3"><a href="liberator-mixin.hypermedia.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>json</span></div></div></li><li class="depth-3"><a href="liberator-mixin.json.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>jws-authorisation</span></div></div></li><li class="depth-3 current"><a href="liberator-mixin.jws-authorisation.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>logging</span></div></div></li><li class="depth-3"><a href="liberator-mixin.logging.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>validation</span></div></div></li><li class="depth-3"><a href="liberator-mixin.validation.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="liberator-mixin.jws-authorisation.core.html#var-with-jws-authorisation"><div class="inner"><span>with-jws-authorisation</span></div></a></li><li class="depth-1"><a href="liberator-mixin.jws-authorisation.core.html#var-with-jws-unauthorised-as-json"><div class="inner"><span>with-jws-unauthorised-as-json</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">liberator-mixin.jws-authorisation.core</h1><div class="doc"><div class="markdown"><p>Liberator mixin to authorise a request based on the scope claim in a signed jwt</p></div></div><div class="public anchor" id="var-with-jws-authorisation"><h3>with-jws-authorisation</h3><div class="usage"><code>(with-jws-authorisation scopes secret &amp; {:keys [token opts], :or {token "Bearer", opts {}}})</code></div><div class="doc"><div class="markdown"><p>Returns a mixin that validates the jws token ensure it includes the scope claim and that claim has the required scope, finally it stores the authentication and authorisation state on the context under :identity</p>
<p>The secret can be a function which is provided the JOSE header as its single param</p>
<p>Takes token as an optional param that changes the type of token looked for (default is Bearer)</p>
<p>Takes opts as an optional param that is used to validate the claims of the token (aud, iss, sub, exp, nbf, iat)</p>
<p>This mixin should only be used once.</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/0.0.40/src/liberator_mixin/jws_authorisation/core.clj#L56">view source</a></div></div><div class="public anchor" id="var-with-jws-unauthorised-as-json"><h3>with-jws-unauthorised-as-json</h3><div class="usage"><code>(with-jws-unauthorised-as-json)</code></div><div class="doc"><div class="markdown"><p>Returns a mixin that handles jws authentication failures returning the detailed error information as json</p></div></div><div class="src-link"><a href="https://github.com/b-social/liberator-mixin/blob/0.0.40/src/liberator_mixin/jws_authorisation/core.clj#L118">view source</a></div></div></div></body></html>